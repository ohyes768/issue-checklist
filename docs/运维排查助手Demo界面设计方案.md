# 运维排查助手 Web界面设计方案 (Streamlit版本)

## 1. 技术架构更新

### 1.1 技术栈变更
- **原方案**: Python tkinter + ttkbootstrap GUI框架
- **新方案**: Python Streamlit Web框架
- **优势**: 开发效率提升90%，界面更专业，调试更简单

### 1.2 Streamlit特性
- **自动生成Web界面**: 无需HTML/CSS知识
- **即时预览**: 代码修改后浏览器自动刷新
- **响应式设计**: 自动适配不同屏幕尺寸
- **丰富组件**: 内置图表、表格、侧边栏等组件

## 2. Web界面布局设计

### 2.1 整体布局设计
```
┌─────────────────────────────────────────────────────────────┐
│ 运维知识库智能排查助手                                    _ □ × │
├─────────────────────────────────────────────────────────────┤
│ 现象筛选: [日志引擎启动异常 ▼] [重置]                      │
├─────────────┬───────────────────────────────────────────────┤
│             │                                               │
│ 当前排查路径  │              当前问题详情                        │
│             │ ┌─────────────────────────────────────────┐   │
│ 📁 日志引擎 │ │ 现象: kafka集群/topic存在异常          │   │
│    启动异常  │ │ 描述: 流计算任务日志kafka topic错误     │   │
│ └─ 程序版本  │ │ 优先级: 8  版本: -                    │   │
│    不一致    │ │ 上级: 日志引擎启动异常                 │   │
│    └─ ◉ yarn│ └─────────────────────────────────────────┘   │
│       节点   │                                               │
│       异常   │              Checklist确认面板                │
│             │ ┌─────────────────────────────────────────┐   │
│             │ │ [ ] yarn节点所在磁盘占用>90% (优先级:9) │   │
│             │ │     描述: 各个节点宿主机df -h查看磁盘占用│   │
│             │ │     [排除] [确认]                       │   │
│             │ │                                         │   │
│             │ │ [ ] yarn节点相关机器时间不一致 (优先级:10)│   │
│             │ │     描述: 各个节点宿主机查看date，确认时间│   │
│             │ │     [排除] [确认]                       │   │
│             │ │                                         │   │
│             │ └─────────────────────────────────────────┘   │
│             │ ┌─────────────────────────────────────────┐   │
│             │ │ 解决方案:                                │   │
│             │ │ 通过kafka监控页面重建异常topic             │   │
│             │ │                                         │   │
│             │ │ 操作步骤:                                │   │
│             │ │ 1. 登录kafka监控页面                     │   │
│             │ │ 2. 找到异常的topic                       │   │
│             │ │ 3. 点击重建按钮                          │   │
│             │ │ 4. 验证topic是否恢复正常                 │   │
│             │ └─────────────────────────────────────────┘   │
│             │                                               │
└─────────────┴───────────────────────────────────────────────┘
```

### 1.2 界面组件详细说明

#### 1.2.1 顶部工具栏
- **现象筛选下拉框**: 显示yml文档一级status标题，支持下拉选择
- **重置按钮**: 清除当前排查进度，重新开始

**功能说明**:
- 下拉框只显示yml文档的顶级status标题（一级问题现象）
- 例如："日志引擎启动异常"、"yarn节点异常"、"kafka节点离线"
- 选择后加载对应yml文档的完整内容和checklist
- 一键重置功能，方便重新开始排查流程
- 确保选项与yml文档结构完全对应，避免混淆

#### 1.2.2 左侧当前排查路径面板 (宽度25%)
- **路径导航**: 显示从开始现象到当前排查节点的完整路径
- **层级结构**:
  - 📁 文件夹图标：表示问题现象
  - └─ 连接线：表示父子关系
  - ◉ 当前位置：标记正在排查的节点
- **导航功能**: 点击路径中任意节点可快速跳转到该节点

**功能说明**:
- **面包屑导航**: 清晰展示排查路径，让用户知道当前所处位置
- **快速回溯**: 点击上级节点可快速返回之前的排查步骤
- **路径跟踪**: 实时显示排查进展，帮助理解排查逻辑
- **界面简洁**: 只显示必要路径，避免信息干扰

#### 1.2.3 右上当前排查详情面板 (高度30%)
- **基本信息**: 当前现象（status）、如何确认（describe）、影响版本（version）、排查优先级（priority）
- **关联信息**: 显示所关联的上一级现象

**功能说明**:
- 展示当前正在排查的checklist项的详细信息
- 帮助用户理解具体现象的确认方法和影响范围
- 显示与上级问题的关联关系，形成完整的排查链条
- 基于priority提供排查重要性指导


#### 1.2.4 右下Checklist确认面板 (高度70%)
- **步骤化展示**: 按priority降序排列显示checklist项目
- **交互式确认**:
  - 每个检查项前面：打x选项（复选框），标记"已排除该原因"
  - 每个检查项后面：[确认]按钮，执行下一步操作
    - 有checklist字段：跳转到下一层级继续深入排查
    - 无checklist字段：直接在下方输出todo项作为解决方案

- **解决方案输出区域**: 点击[确认]后显示具体的操作步骤和建议

**功能说明**:
- **逐步排除法排查**：引导用户按优先级逐一排除可能的原因
- **状态跟踪**：通过复选框标记已排除的原因，缩小问题范围
- **即时反馈**：[确认]按钮点击后立即显示解决方案，无需额外分析步骤
- **操作指导**：提供具体的解决方案和操作步骤，帮助用户解决问题

# è¿ç»´æ’æŸ¥åŠ©æ‰‹ æŠ€æœ¯è®¾è®¡æ–¹æ¡ˆ

## æ–‡æ¡£å˜æ›´è®°å½•

### 2026-02-10 - UIä¼˜åŒ–å’ŒåŠŸèƒ½å¢å¼º
**å˜æ›´ç±»å‹**: åŠŸèƒ½ä¼˜åŒ– + Bugä¿®å¤

**ä¸»è¦å˜æ›´å†…å®¹**:
1. **åç«¯APIå¢å¼º**:
   - `serializers.py`: æ·»åŠ  `checklistCount` å­—æ®µç»Ÿè®¡
   - é€’å½’ç»Ÿè®¡æ‰€æœ‰å­æ£€æŸ¥é¡¹æ•°é‡ï¼ˆåŒ…æ‹¬æ·±å±‚åµŒå¥—ï¼‰
   - ä¸º `/api/issues/summary` æ¥å£è¿”å›æ£€æŸ¥å•æ•°é‡

2. **å‰ç«¯æ¶æ„ä¼˜åŒ–**:
   - æŠ€æœ¯æ ˆ: React 19 + TypeScript + Vite + Tailwind CSS v4
   - ç»„ä»¶åŒ–é‡æ„ï¼šIssueSelectorã€IssueDetailã€CheckList
   - çŠ¶æ€ç®¡ç†ï¼šè‡ªå®šä¹‰Hook (useAppState)

3. **å‰ç«¯åŠŸèƒ½å¢å¼º**:
   - é¦–é¡µå¡ç‰‡ç´§å‡‘åŒ–è®¾è®¡ï¼Œæ·»åŠ æ£€æŸ¥å•æ•°é‡æ˜¾ç¤º
   - é—®é¢˜è¯¦æƒ…é¡µç»“æ„é‡ç»„ï¼Œæ–°å¢"ç›¸å…³çŸ¥è¯†åº“"æ¨¡å—
   - æ™ºèƒ½æ ¼å¼åŒ–å‡½æ•° `formatNumberedList()`ï¼Œè‡ªåŠ¨è¯†åˆ«ç¼–å·åˆ—è¡¨

4. **æ•°æ®æ ¼å¼ä¼˜åŒ–**:
   - YAMLæ•°æ®ç»Ÿä¸€ä½¿ç”¨ `|` (Literal Style) ä¿ç•™æ¢è¡Œç¬¦
   - ç®€åŒ–åºåˆ—åŒ–é€»è¾‘ï¼Œç§»é™¤å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼å¤„ç†

5. **Bugä¿®å¤**:
   - ä¿®å¤ç¼–å·åˆ—è¡¨æ¢è¡Œç¬¦æ˜¾ç¤ºé—®é¢˜
   - è§£å†³JSONåºåˆ—åŒ–åæ¢è¡Œç¬¦è½¬ä¹‰åœ¨å‰ç«¯ä¸¢å¤±çš„é—®é¢˜

**å½±å“èŒƒå›´**:
- `api/serializers.py` - æ·»åŠ checklistCountç»Ÿè®¡é€»è¾‘
- `issue-checkæ’æŸ¥ç³»ç»Ÿ/src/app/components/` - ç»„ä»¶é‡æ„å’Œä¼˜åŒ–
- `issue-checkæ’æŸ¥ç³»ç»Ÿ/src/app/services/api.ts` - APIæ¥å£ç±»å‹å®šä¹‰
- `data/*.yml` - YAMLæ•°æ®æ ¼å¼ç»Ÿä¸€ä¼˜åŒ–

---

### 2026-01-22 - åŠŸèƒ½å¢å¼º
**å˜æ›´ç±»å‹**: è§£å†³æ–¹æ¡ˆå¢å¼º

**ä¸»è¦å˜æ›´å†…å®¹**:
1. **ChecklistItemæ•°æ®æ¨¡å‹å¢å¼º**:
   - æ–°å¢ `wiki_links` å­—æ®µï¼Œæ”¯æŒå…³è”Wikiæ–‡æ¡£é“¾æ¥åˆ—è¡¨
   - æ–°å¢ `gif_links` å­—æ®µï¼Œæ”¯æŒå…³è”GIFæ¼”ç¤ºè§†é¢‘é“¾æ¥åˆ—è¡¨
   - æ–°å¢ `script_links` å­—æ®µï¼Œæ”¯æŒå…³è”è„šæœ¬æ–‡ä»¶é“¾æ¥åˆ—è¡¨
   - æ‰€æœ‰å­—æ®µå‡ä¸ºå¯é€‰ï¼Œæ”¯æŒå¤šä¸ªé“¾æ¥

2. **TreeChecklistItemæ•°æ®æ¨¡å‹å¢å¼º**:
   - åŒæ­¥æ·»åŠ  `wiki_links`ã€`gif_links`ã€`script_links` ä¸‰ä¸ªå­—æ®µ
   - ä½¿ç”¨ `field(default_factory=list)` ç¡®ä¿é»˜è®¤å€¼ä¸ºç©ºåˆ—è¡¨
   - å­—æ®µé¡ºåºè°ƒæ•´ï¼Œç¬¦åˆdataclassè§„èŒƒ

3. **æ•°æ®åŠ è½½é€»è¾‘å¢å¼º**:
   - `data_loader.py` æ”¯æŒè§£æä¸‰ä¸ªæ–°å­—æ®µ
   - ä»YAMLæ–‡ä»¶ä¸­è¯»å–é“¾æ¥åˆ—è¡¨å¹¶ä¼ é€’åˆ°æ•°æ®æ¨¡å‹

4. **æ ‘å½¢æ„å»ºé€»è¾‘å¢å¼º**:
   - `tree_builder.py` æ„å»ºæ ‘å½¢ç»“æ„æ—¶æ­£ç¡®ä¼ é€’é“¾æ¥å­—æ®µ
   - æ™®é€šé¡¹å’Œå¼•ç”¨é¡¹éƒ½æ”¯æŒé“¾æ¥å­—æ®µ

5. **ç•Œé¢æ¸²æŸ“å¢å¼º**:
   - `web_controller.py` è§£å†³æ–¹æ¡ˆé¢æ¿ä¸­æ˜¾ç¤ºä¸‰ç±»é“¾æ¥
   - ğŸ“š ç›¸å…³æ–‡æ¡£ï¼šæ˜¾ç¤ºWikiæ–‡æ¡£é“¾æ¥
   - ğŸ¬ æ¼”ç¤ºè§†é¢‘ï¼šæ˜¾ç¤ºGIFæ¼”ç¤ºé“¾æ¥
   - ğŸ“œ ç›¸å…³è„šæœ¬ï¼šæ˜¾ç¤ºè„šæœ¬æ–‡ä»¶é“¾æ¥
   - è‡ªåŠ¨URLè§£ç ï¼Œå°†URLç¼–ç çš„ä¸­æ–‡è·¯å¾„è½¬æ¢ä¸ºå¯è¯»çš„ä¸­æ–‡

**å½±å“èŒƒå›´**:
- `src/models/checklist.py`: ChecklistItemå’ŒTreeChecklistItemæ·»åŠ ä¸‰ä¸ªé“¾æ¥å­—æ®µ
- `src/utils/data_loader.py`: æ”¯æŒè§£æé“¾æ¥å­—æ®µ
- `src/utils/tree_builder.py`: ä¼ é€’é“¾æ¥å­—æ®µåˆ°æ ‘å½¢ç»“æ„
- `src/controllers/web_controller.py`: ç•Œé¢æ˜¾ç¤ºé“¾æ¥å¹¶è‡ªåŠ¨è§£ç URL

**ç”¨æˆ·ä½“éªŒå˜åŒ–**:
- è§£å†³æ–¹æ¡ˆé¡µé¢æ–°å¢ä¸‰ä¸ªé“¾æ¥åŒºåŸŸ
- ç”¨æˆ·å¯ä»¥ç›´æ¥ç‚¹å‡»æŸ¥çœ‹Wikiæ–‡æ¡£ã€æ¼”ç¤ºè§†é¢‘å’Œè„šæœ¬æ–‡ä»¶
- URLè‡ªåŠ¨è§£ç æ˜¾ç¤ºä¸­æ–‡ï¼Œæå‡å¯è¯»æ€§

**YAMLæ•°æ®æ ¼å¼ç¤ºä¾‹**:
```yaml
status: "æµä»»åŠ¡å¯åŠ¨æ—¶æç¤ºé”™è¯¯ä¿¡æ¯-èµ„æºä¸è¶³"
describe: "ç‚¹å‡»æ—¥å¿—/å‘Šè­¦å¼•æ“å¯åŠ¨/é‡å¯ï¼Œæç¤ºæµä»»åŠ¡èµ„æºä¸è¶³"
priority: 6
version: "BaaS-v4.14+"
todo: "è¿ç»´è´¦å·ç™»å½•flinkç›‘æ§é¡µé¢ï¼Œä¿®æ”¹å¼•æ“slotsæ•°ç›®"
wiki_links:
  - "https://wiki.das-security.cn/pages/viewpage.action?pageId=32212133"
gif_links:
  - "http://10.50.1.141/release/é£éæ•°æ®ä¸­å°/æ“ä½œæŒ‡å¼•/æµä»»åŠ¡ç›¸å…³/æ¼”ç¤º.gif"
script_links:
  - "http://10.50.1.141/scripts/check_resource.sh"
```

---

### 2026-01-21 - åŠŸèƒ½å¢å¼º
**å˜æ›´ç±»å‹**: æ•°æ®ç®¡ç†ä¼˜åŒ–å’Œç”¨æˆ·ä½“éªŒæå‡

**ä¸»è¦å˜æ›´å†…å®¹**:
1. **Issueæ•°æ®æ¨¡å‹å¢å¼º**:
   - æ–°å¢ `display` å­—æ®µï¼Œæ”¯æŒæ§åˆ¶é—®é¢˜æ˜¯å¦åœ¨ä¸‹æ‹‰åˆ—è¡¨ä¸­æ˜¾ç¤º
   - é»˜è®¤å€¼ä¸º `false`ï¼Œåªæœ‰æ˜¾å¼è®¾ç½®ä¸º `true` çš„é—®é¢˜æ‰ä¼šæ˜¾ç¤º
   - æ”¯æŒé—®é¢˜çš„åˆ†ç±»ç®¡ç†å’Œå¯è§æ€§æ§åˆ¶

2. **DataLoaderåŠŸèƒ½å¤§å¹…å¢å¼º**:
   - æ”¯æŒé€’å½’è¯»å– data ç›®å½•åŠæ‰€æœ‰å­ç›®å½•çš„ YAML æ–‡ä»¶
   - å®ç°æ•°æ®è´¨é‡æ£€æŸ¥æŠ¥å‘ŠåŠŸèƒ½ï¼Œåœ¨åˆå§‹åŒ–æ—¶è‡ªåŠ¨æ£€æŸ¥æ‰€æœ‰æ–‡ä»¶
   - é—®é¢˜åˆ—è¡¨æŒ‰ä¼˜å…ˆçº§é™åºæ’åˆ—ï¼ˆé«˜ä¼˜å…ˆçº§åœ¨å‰ï¼‰
   - å¢å¼ºçš„å­—æ®µå®Œæ•´æ€§æ£€æŸ¥ï¼šstatusã€describeã€priorityã€versionã€displayã€checklist

3. **æ•°æ®è´¨é‡æ£€æŸ¥åŠŸèƒ½**:
   - æ£€æŸ¥æ–‡ä»¶ä¿¡æ¯å®Œæ•´æ€§ï¼ˆç¼ºå¤±å­—æ®µã€ç©ºå€¼ã€æ ¼å¼é”™è¯¯ç­‰ï¼‰
   - æ£€æŸ¥æ— æ•ˆçš„referå¼•ç”¨ï¼ˆåŒºåˆ†æ–‡ä»¶ä¸å­˜åœ¨å’Œæ–‡ä»¶å­˜åœ¨ä½†åŠ è½½å¤±è´¥ï¼‰
   - æ‰“å°è¯¦ç»†çš„æ•°æ®è´¨é‡æŠ¥å‘Šï¼Œä¾¿äºç»´æŠ¤å’Œè°ƒè¯•

4. **Streamlitè­¦å‘Šä¿®å¤**:
   - ä¿®å¤ ScriptRunContext è­¦å‘Š
   - å°†é¡µé¢é…ç½®ä»ç±»åˆå§‹åŒ–ç§»åˆ° main å‡½æ•°å¼€å¤´

**å½±å“èŒƒå›´**:
- `src/models/checklist.py`: æ·»åŠ  display å­—æ®µ
- `src/utils/data_loader.py`: å¤§å¹…å¢å¼ºï¼Œæ–°å¢287è¡Œä»£ç 
- `src/main_app.py`: ä¿®å¤é¡µé¢é…ç½®è°ƒç”¨æ—¶æœº

**ç”¨æˆ·ä½“éªŒå˜åŒ–**:
- é—®é¢˜åˆ—è¡¨æ›´ç®€æ´ï¼Œåªæ˜¾ç¤ºè®¾ç½®ä¸ºå¯è§çš„é—®é¢˜
- é—®é¢˜æŒ‰ä¼˜å…ˆçº§æ’åºï¼Œé«˜ä¼˜å…ˆçº§é—®é¢˜ä¼˜å…ˆæ˜¾ç¤º
- æ”¯æŒæŒ‰å­ç›®å½•åˆ†ç±»ç»„ç»‡ YAML æ–‡ä»¶
- åˆå§‹åŒ–æ—¶æä¾›è¯¦ç»†çš„æ•°æ®è´¨é‡åé¦ˆ

---

## 1. é¡¹ç›®æ¦‚è¿°

åŸºäºStreamlitæ„å»ºçš„è¿ç»´çŸ¥è¯†åº“æ™ºèƒ½æ’æŸ¥åŠ©æ‰‹ï¼Œé€šè¿‡ä¸‰æ å¸ƒå±€è®¾è®¡å’Œæ™ºèƒ½äº¤äº’é€»è¾‘ï¼Œä¸ºè¿ç»´äººå‘˜æä¾›é«˜æ•ˆçš„æ•…éšœæ’æŸ¥ä½“éªŒã€‚

## 1. äº¤äº’è®¾è®¡ç†å¿µ

### 1.1 æ ¸å¿ƒè®¾è®¡åŸåˆ™

#### ğŸ¯ æ™ºèƒ½çŠ¶æ€ç®¡ç†
ç³»ç»Ÿé‡‡ç”¨æ™ºèƒ½çŠ¶æ€åˆ‡æ¢æœºåˆ¶ï¼Œæ ¹æ®ç”¨æˆ·æ“ä½œè‡ªåŠ¨è°ƒæ•´ç•Œé¢å†…å®¹ï¼Œå®ç°æ— ç¼æ’æŸ¥ä½“éªŒï¼š

1. **Checklist â†’ è§£å†³æ–¹æ¡ˆ**: ç¡®è®¤æ£€æŸ¥é¡¹åï¼Œå³ä¾§è‡ªåŠ¨ä»æ£€æŸ¥åˆ—è¡¨åˆ‡æ¢ä¸ºè§£å†³æ–¹æ¡ˆè¯¦æƒ…
2. **å¼•ç”¨é¡¹ç›®å¤„ç†**: è‡ªåŠ¨è¯†åˆ«å¼•ç”¨ç±»å‹ï¼ˆreferï¼‰ï¼Œæ™ºèƒ½æ˜¾ç¤ºå¯¹åº”å†…å®¹
   - æ™®é€šå¼•ç”¨é¡¹ç›® â†’ æ˜¾ç¤ºè¢«å¼•ç”¨é¡¹ç›®çš„å­æ£€æŸ¥é¡¹åˆ—è¡¨
   - æœ‰è§£å†³æ–¹æ¡ˆé¡¹ç›® â†’ ç›´æ¥æ˜¾ç¤ºè§£å†³æ–¹æ¡ˆ
3. **æŒç»­æ’æŸ¥**: æ”¯æŒè¿”å›ç»§ç»­æ’æŸ¥ï¼Œä¸å¼ºåˆ¶ä¸­æ–­æµç¨‹

#### ğŸ“ ç²¾å‡†ä¿¡æ¯å±•ç¤º
é‡‡ç”¨ä¸‰æ å¸ƒå±€è®¾è®¡ï¼Œæ¯ä¸ªé¢æ¿èŒè´£æ¸…æ™°ï¼Œä¿¡æ¯å±•ç¤ºç²¾å‡†ï¼š

- **å·¦ä¾§é¢æ¿ (å æ¯”1.2)**: é—®é¢˜é€‰æ‹© + å¯¼èˆªè·¯å¾„
- **ä¸­é—´è¯¦æƒ… (å æ¯”1.4)**: å§‹ç»ˆæ˜¾ç¤ºå½“å‰æ£€æŸ¥é¡¹çš„å®Œæ•´ä¿¡æ¯
- **å³ä¾§æ“ä½œ (å æ¯”1.4)**: æ ¹æ®çŠ¶æ€åŠ¨æ€åˆ‡æ¢å†…å®¹

#### ğŸ’¡ ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- **ç»Ÿä¸€å±•ç¤ºè§„èŒƒ**: é—®é¢˜ç°è±¡å’Œæ£€æŸ¥é¡¹ä½¿ç”¨ç›¸åŒçš„å±•ç¤ºæ ¼å¼
- **å®æ—¶è§†è§‰åé¦ˆ**: æ’é™¤/ç¡®è®¤æ“ä½œç«‹å³åæ˜ åœ¨ç•Œé¢ä¸Š
- **æ— ç¼æ“ä½œæµç¨‹**: é€‰æ‹© â†’ æŸ¥çœ‹ â†’ ç¡®è®¤ â†’ è§£å†³ï¼Œä¸€æ°”å‘µæˆ

### 1.2 ç•Œé¢äº¤äº’é€»è¾‘

#### ğŸ”„ çŠ¶æ€æµè½¬æœºåˆ¶
```
é€‰æ‹©é—®é¢˜ â†’ æ˜¾ç¤ºChecklist â†’ ç¡®è®¤é¡¹ç›® â†’ å†…å®¹åˆ‡æ¢
    â†“           â†“           â†“           â†“
  å·¦ä¾§é¢æ¿    å³ä¾§é¢æ¿    ä¸­é—´æ›´æ–°    å³ä¾§æ›´æ–°
é—®é¢˜é€‰æ‹©    æ£€æŸ¥åˆ—è¡¨    è¯¦æƒ…æ˜¾ç¤º    è§£å†³æ–¹æ¡ˆæ˜¾ç¤º
```

#### ğŸ“Š æ™ºèƒ½åˆ‡æ¢ç­–ç•¥
- **å·²ç¡®è®¤é¡¹ç›®æ£€æŸ¥**ï¼šä¸­é—´æ˜¾ç¤ºå·²ç¡®è®¤æ£€æŸ¥é¡¹ï¼Œå³ä¾§æ˜¾ç¤ºè§£å†³æ–¹æ¡ˆ
- **æœªç¡®è®¤é¡¹ç›®æ£€æŸ¥**ï¼šä¸­é—´æ˜¾ç¤ºå½“å‰æ’æŸ¥è¿›å±•ï¼Œå³ä¾§æ˜¾ç¤ºChecklistç¡®è®¤å•
- **å¼•ç”¨é¡¹ç›®æ£€æŸ¥**ï¼šæ™ºèƒ½åˆ¤æ–­å¼•ç”¨ç±»å‹ï¼Œæ˜¾ç¤ºç›¸åº”å­æ£€æŸ¥é¡¹æˆ–è§£å†³æ–¹æ¡ˆ

## 2. æ•°æ®æ¨¡å‹è®¾è®¡

### 2.1 æ ¸å¿ƒæ•°æ®ç»“æ„

#### 2.1.1 Issue æ•°æ®æ¨¡å‹
```python
@dataclass
class Issue:
    """é—®é¢˜ç°è±¡æ•°æ®æ¨¡å‹ï¼ˆæ”¯æŒé¡¶å±‚priorityå’Œversionï¼‰"""
    file_name: str        # ymlæ–‡ä»¶å
    status: str           # é—®é¢˜ç°è±¡æ ‡é¢˜
    describe: str         # é—®é¢˜æè¿°
    priority: int         # é—®é¢˜æ•´ä½“ä¼˜å…ˆçº§(1-10)
    version: str          # é—®é¢˜å½±å“ç‰ˆæœ¬
    checklist: List['ChecklistItem']  # ç›´æ¥åŸå› checkliståˆ—è¡¨
    display: bool = False  # æ˜¯å¦åœ¨é—®é¢˜åˆ—è¡¨ä¸­æ˜¾ç¤ºï¼Œé»˜è®¤ä¸ºFalse

    def get_checklist_by_priority(self) -> List['ChecklistItem']:
        """æŒ‰ä¼˜å…ˆçº§é™åºè¿”å›checklist"""
        return sorted(self.checklist, key=lambda x: x.priority, reverse=True)

    def __post_init__(self):
        """æ•°æ®éªŒè¯"""
        if self.priority < 1 or self.priority > 10:
            raise ValueError(f"ä¼˜å…ˆçº§å¿…é¡»åœ¨1-10ä¹‹é—´ï¼Œå½“å‰å€¼: {self.priority}")
        if not self.status.strip():
            raise ValueError("statusä¸èƒ½ä¸ºç©º")
        if self.describe is None:
            raise ValueError("describeä¸èƒ½ä¸ºNone")
```

**å­—æ®µè¯´æ˜**ï¼š
- `display`: æ§åˆ¶é—®é¢˜æ˜¯å¦å‡ºç°åœ¨ä¸‹æ‹‰åˆ—è¡¨ä¸­ï¼Œé»˜è®¤ä¸º `False`ã€‚åªæœ‰è®¾ç½®ä¸º `true` çš„é—®é¢˜æ‰ä¼šæ˜¾ç¤ºåœ¨é—®é¢˜é€‰æ‹©åˆ—è¡¨ä¸­ã€‚è¿™ä¸ªå­—æ®µå…è®¸æˆ‘ä»¬ï¼š
  - éšè—ä»…ä¾›å¼•ç”¨çš„å­é—®é¢˜
  - æ§åˆ¶ç”¨æˆ·å¯è§çš„é—®é¢˜èŒƒå›´
  - æ”¯æŒé—®é¢˜çš„åˆ†ç±»ç®¡ç†

#### 2.1.2 ChecklistItem æ•°æ®æ¨¡å‹
```python
@dataclass
class ChecklistItem:
    """æ£€æŸ¥é¡¹ç›®æ•°æ®æ¨¡å‹"""
    status: str  # ç›´æ¥åŸå› ç°è±¡æè¿°
    describe: str  # è¯¦ç»†è¯´æ˜å’Œç¡®è®¤æ–¹æ³•
    priority: int  # ä¼˜å…ˆçº§(1-10)
    version: str  # å½±å“ç‰ˆæœ¬èŒƒå›´
    todo: str  # è§£å†³æ–¹æ¡ˆæè¿°
    wiki_links: Optional[List[str]] = None  # Wikiæ–‡æ¡£é“¾æ¥åˆ—è¡¨
    gif_links: Optional[List[str]] = None  # GIFæ¼”ç¤ºå›¾é“¾æ¥åˆ—è¡¨
    script_links: Optional[List[str]] = None  # è„šæœ¬æ–‡ä»¶é“¾æ¥åˆ—è¡¨
    checklist: Optional[List['ChecklistItem']] = None  # å­checklist
    refer: Optional[str] = None  # ç›¸å…³é—®é¢˜å¼•ç”¨
```

**å­—æ®µè¯´æ˜**ï¼š
- `wiki_links`: Wikiæ–‡æ¡£é“¾æ¥åˆ—è¡¨ï¼Œå¯é€‰å­—æ®µã€‚ç”¨äºå…³è”è¯¦ç»†çš„æ“ä½œæ–‡æ¡£æˆ–çŸ¥è¯†åº“æ–‡ç« 
- `gif_links`: GIFæ¼”ç¤ºå›¾é“¾æ¥åˆ—è¡¨ï¼Œå¯é€‰å­—æ®µã€‚ç”¨äºå…³è”æ“ä½œæ¼”ç¤ºè§†é¢‘æˆ–GIFåŠ¨å›¾
- `script_links`: è„šæœ¬æ–‡ä»¶é“¾æ¥åˆ—è¡¨ï¼Œå¯é€‰å­—æ®µã€‚ç”¨äºå…³è”è‡ªåŠ¨åŒ–è„šæœ¬æˆ–å·¥å…·ä¸‹è½½åœ°å€
- æ‰€æœ‰é“¾æ¥å­—æ®µéƒ½æ”¯æŒå¤šä¸ªURLï¼ŒæŒ‰åˆ—è¡¨å½¢å¼å­˜å‚¨

#### 2.1.3 TreeChecklistItem æ•°æ®æ¨¡å‹
```python
@dataclass
class TreeChecklistItem:
    """æ ‘å½¢æ£€æŸ¥é¡¹æ•°æ®æ¨¡å‹ï¼ˆæ”¯æŒreferå¼•ç”¨å’Œæ ‘å½¢ç»“æ„ï¼‰"""
    status: str  # æ˜¾ç¤ºæ ‡é¢˜
    describe: str  # æè¿°
    priority: int  # ä¼˜å…ˆçº§
    version: str  # ç‰ˆæœ¬
    todo: str  # è§£å†³æ–¹æ¡ˆ
    source_file: str  # æ¥æºymlæ–‡ä»¶
    original_path: List[str]  # åŸå§‹è·¯å¾„ï¼ˆç”¨äºå¯¼èˆªï¼‰
    wiki_links: List[str] = field(default_factory=list)  # Wikiæ–‡æ¡£é“¾æ¥åˆ—è¡¨
    gif_links: List[str] = field(default_factory=list)  # GIFæ¼”ç¤ºå›¾é“¾æ¥åˆ—è¡¨
    script_links: List[str] = field(default_factory=list)  # è„šæœ¬æ–‡ä»¶é“¾æ¥åˆ—è¡¨
    children: List['TreeChecklistItem'] = field(default_factory=list)  # å­é¡¹
    is_refer: bool = False  # æ˜¯å¦ä¸ºreferå¼•ç”¨çš„é¡¹
    parent_ref: Optional[str] = None  # çˆ¶çº§å¼•ç”¨æ¥æº
    confirmed: bool = False  # æ˜¯å¦å·²ç¡®è®¤
```

**å­—æ®µè¯´æ˜**ï¼š
- `wiki_links`: Wikiæ–‡æ¡£é“¾æ¥åˆ—è¡¨ï¼Œé»˜è®¤ä¸ºç©ºåˆ—è¡¨
- `gif_links`: GIFæ¼”ç¤ºå›¾é“¾æ¥åˆ—è¡¨ï¼Œé»˜è®¤ä¸ºç©ºåˆ—è¡¨
- `script_links`: è„šæœ¬æ–‡ä»¶é“¾æ¥åˆ—è¡¨ï¼Œé»˜è®¤ä¸ºç©ºåˆ—è¡¨
- ä¸ChecklistItemä¸åŒï¼ŒTreeChecklistItemä½¿ç”¨`field(default_factory=list)`ç¡®ä¿é»˜è®¤å€¼ä¸ºç©ºåˆ—è¡¨è€ŒéNone

#### 2.1.4 åº”ç”¨çŠ¶æ€æ¨¡å‹
```python
@dataclass
class AppState:
    """åº”ç”¨çŠ¶æ€ç®¡ç†ï¼ˆæ”¯æŒæ™ºèƒ½äº¤äº’å’ŒçŠ¶æ€åˆ‡æ¢ï¼‰"""
    current_issue: Optional[str] = None                 # é€‰æ‹©çš„é—®é¢˜åç§°
    current_issue_name: Optional[str] = None            # é—®é¢˜åç§°å­—æ®µ
    current_tree: Optional[TreeChecklistItem] = None    # å½“å‰æ ‘å½¢ç»“æ„
    current_checklist: Optional[TreeChecklistItem] = None  # å½“å‰æ£€æŸ¥é¡¹
    excluded_items: List[str] = field(default_factory=list)    # å·²æ’é™¤é¡¹ç›®è·¯å¾„
    navigation_path: List[str] = field(default_factory=list)    # å½“å‰å¯¼èˆªè·¯å¾„
    solution_text: Optional[str] = None                     # å½“å‰æ˜¾ç¤ºçš„è§£å†³æ–¹æ¡ˆ
    confirmed_item: Optional[TreeChecklistItem] = None      # å½“å‰å·²ç¡®è®¤çš„é¡¹ç›®

    def get_current_path_display(self) -> str:
        """è·å–å½“å‰è·¯å¾„çš„æ˜¾ç¤ºæ–‡æœ¬"""
        return " â†’ ".join(self.navigation_path) if self.navigation_path else "æœªå¼€å§‹æ’æŸ¥"

    def is_at_root(self) -> bool:
        """æ˜¯å¦åœ¨æ ¹èŠ‚ç‚¹"""
        return len(self.navigation_path) <= 1

    def get_current_checklist_items(self) -> List[TreeChecklistItem]:
        """è·å–å½“å‰å±‚çº§çš„checklisté¡¹ï¼ŒæŒ‰ä¼˜å…ˆçº§æ’åº"""
        if not self.current_checklist:
            if self.current_tree:
                return self.current_tree.get_children_by_priority()
            return []

        return self.current_checklist.get_children_by_priority()

    def has_solution(self) -> bool:
        """å½“å‰æ˜¯å¦æœ‰è§£å†³æ–¹æ¡ˆ"""
        return self.solution_text is not None

    def has_confirmed_item(self) -> bool:
        """æ˜¯å¦æœ‰å·²ç¡®è®¤çš„é¡¹ç›®"""
        return self.confirmed_item is not None
```

### 2.2 YAMLæ•°æ®è§£æå™¨

#### 2.2.1 DataLoader ç±»è®¾è®¡
```python
import yaml
import os
from pathlib import Path
from typing import Dict, List

class DataLoader:
    """YAMLæ•°æ®åŠ è½½å’Œè§£æå™¨ï¼ˆæ”¯æŒé€’å½’è¯»å–å’Œæ•°æ®è´¨é‡æ£€æŸ¥ï¼‰"""

    def __init__(self, data_dir: str = "data"):
        self.data_dir = Path(data_dir)
        self.issues: Dict[str, Issue] = {}
        self.issue_list: List[str] = []
        self.loaded_files: set = set()  # è®°å½•æˆåŠŸåŠ è½½çš„æ–‡ä»¶
        self.all_yml_files: set = set()  # è®°å½•æ‰€æœ‰ymlæ–‡ä»¶
        self.file_issues: Dict[str, List[str]] = {}  # è®°å½•æ¯ä¸ªæ–‡ä»¶çš„é—®é¢˜

    def load_all_issues(self) -> Dict[str, Issue]:
        """åŠ è½½æ‰€æœ‰ymlæ–‡ä»¶ä¸­çš„é—®é¢˜æ•°æ®ï¼ˆåŒ…æ‹¬æ‰€æœ‰å­ç›®å½•ï¼‰"""
        self.issues.clear()
        self.issue_list.clear()
        self.loaded_files.clear()
        self.all_yml_files.clear()
        self.file_issues.clear()

        # è·å–æ‰€æœ‰ymlæ–‡ä»¶ï¼ˆåŒ…æ‹¬æ‰€æœ‰å­ç›®å½•ï¼‰
        yml_files = list(self.data_dir.rglob("*.yml")) + list(self.data_dir.rglob("*.yaml"))

        # è®°å½•æ‰€æœ‰ymlæ–‡ä»¶
        self.all_yml_files = set(yml_files)

        # å…ˆæ£€æŸ¥æ‰€æœ‰æ–‡ä»¶çš„å®Œæ•´æ€§
        self._check_all_files_integrity(yml_files)

        for yml_file in yml_files:
            issue = self._parse_yml_file(yml_file)
            if issue:
                self.issues[issue.status] = issue
                self.issue_list.append(issue.status)
                self.loaded_files.add(yml_file)

        # æ‰“å°æ•°æ®è´¨é‡æ£€æŸ¥æŠ¥å‘Š
        self._print_data_quality_report()

        return self.issues

    def get_issue_names(self) -> List[str]:
        """è·å–æ‰€æœ‰é—®é¢˜åç§°åˆ—è¡¨ï¼ˆä»…è¿”å›display=Trueçš„é—®é¢˜ï¼ŒæŒ‰ä¼˜å…ˆçº§é™åºæ’åˆ—ï¼‰"""
        visible_issues = [issue for issue in self.issues.values() if issue.display]
        sorted_issues = sorted(visible_issues, key=lambda x: x.priority, reverse=True)
        return [issue.status for issue in sorted_issues]

    def _check_all_files_integrity(self, yml_files: List[Path]):
        """æ£€æŸ¥æ‰€æœ‰æ–‡ä»¶çš„å®Œæ•´æ€§"""
        for yml_file in yml_files:
            rel_path = str(yml_file.relative_to(self.data_dir))
            issues = []

            try:
                with open(yml_file, 'r', encoding='utf-8') as f:
                    data = yaml.safe_load(f)

                # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ä¸ºç©º
                if not data:
                    issues.append("æ–‡ä»¶ä¸ºç©º")
                    self.file_issues[rel_path] = issues
                    continue

                # æ£€æŸ¥å¿…éœ€å­—æ®µ
                if 'status' not in data:
                    issues.append("ç¼ºå°‘statuså­—æ®µï¼ˆå¿…éœ€ï¼‰")
                elif not data['status'] or not str(data['status']).strip():
                    issues.append("statuså­—æ®µä¸ºç©º")

                # æ£€æŸ¥å¯é€‰ä½†å»ºè®®çš„å­—æ®µ
                if 'describe' not in data:
                    issues.append("ç¼ºå°‘describeå­—æ®µï¼ˆå»ºè®®æ·»åŠ ï¼‰")
                elif data['describe'] is None or not str(data['describe']).strip():
                    issues.append("describeå­—æ®µä¸ºç©ºï¼ˆå»ºè®®æ·»åŠ æè¿°ï¼‰")

                if 'priority' not in data:
                    issues.append("ç¼ºå°‘priorityå­—æ®µï¼ˆé»˜è®¤ä½¿ç”¨5ï¼‰")
                elif not isinstance(data['priority'], int) or data['priority'] < 1 or data['priority'] > 10:
                    issues.append(f"priorityå­—æ®µå€¼æ— æ•ˆ: {data['priority']}ï¼ˆåº”ä¸º1-10çš„æ•´æ•°ï¼‰")

                if 'version' not in data:
                    issues.append("ç¼ºå°‘versionå­—æ®µï¼ˆé»˜è®¤ä½¿ç”¨'-'ï¼‰")
                elif not str(data['version']).strip():
                    issues.append("versionå­—æ®µä¸ºç©ºå­—ç¬¦ä¸²ï¼ˆå»ºè®®è®¾ç½®ç‰ˆæœ¬èŒƒå›´ï¼‰")

                if 'display' not in data:
                    issues.append("ç¼ºå°‘displayå­—æ®µï¼ˆé»˜è®¤ä¸ºfalseï¼Œä¸ä¼šæ˜¾ç¤ºåœ¨é—®é¢˜åˆ—è¡¨ä¸­ï¼‰")

                if 'checklist' not in data:
                    issues.append("ç¼ºå°‘checklistå­—æ®µï¼ˆæ²¡æœ‰æ£€æŸ¥é¡¹ï¼‰")
                elif not data['checklist'] or not isinstance(data['checklist'], list):
                    issues.append("checklistå­—æ®µä¸ºç©ºæˆ–æ ¼å¼é”™è¯¯")

                # è®°å½•é—®é¢˜
                if issues:
                    self.file_issues[rel_path] = issues

            except yaml.YAMLError as e:
                self.file_issues[rel_path] = [f"YAMLè§£æé”™è¯¯: {str(e)}"]
            except Exception as e:
                self.file_issues[rel_path] = [f"è¯»å–æ–‡ä»¶é”™è¯¯: {str(e)}"]

    def _print_data_quality_report(self):
        """æ‰“å°æ•°æ®è´¨é‡æ£€æŸ¥æŠ¥å‘Š"""
        print("\n" + "="*60)
        print("ğŸ“Š æ•°æ®è´¨é‡æ£€æŸ¥æŠ¥å‘Š")
        print("="*60)

        # 1. æ˜¾ç¤ºä¿¡æ¯ä¸å®Œæ•´çš„æ–‡ä»¶
        if self.file_issues:
            print(f"\nâš ï¸  ä»¥ä¸‹ {len(self.file_issues)} ä¸ªæ–‡ä»¶ä¿¡æ¯ä¸å®Œæ•´:")
            for file_path, issues in sorted(self.file_issues.items()):
                print(f"\n   ğŸ“„ {file_path}:")
                for issue in issues:
                    print(f"      - {issue}")
            print(f"\n   ğŸ’¡ å»ºè®®: è¯·è¡¥å……ç¼ºå¤±çš„å­—æ®µä¿¡æ¯")
        else:
            print("\nâœ… æ‰€æœ‰æ–‡ä»¶ä¿¡æ¯å®Œæ•´")

        # 2. æ£€æŸ¥æ— æ•ˆçš„referå¼•ç”¨ï¼Œå¹¶åˆ†ç±»
        invalid_refs_not_exist = []  # å¼•ç”¨çš„æ–‡ä»¶ä¸å­˜åœ¨
        invalid_refs_not_loaded = []  # æ–‡ä»¶å­˜åœ¨ä½†æœªåŠ è½½

        for issue_name, issue in self.issues.items():
            self._collect_invalid_references_detailed(
                issue_name,
                issue.checklist,
                invalid_refs_not_exist,
                invalid_refs_not_loaded
            )

        # æ‰“å°æ–‡ä»¶ä¸å­˜åœ¨çš„å¼•ç”¨
        if invalid_refs_not_exist:
            print(f"\nâŒ ä»¥ä¸‹ {len(invalid_refs_not_exist)} ä¸ªreferå¼•ç”¨çš„æ–‡ä»¶ä¸å­˜åœ¨:")
            for ref_info in invalid_refs_not_exist:
                print(f"   - é—®é¢˜ '{ref_info['source']}' å¼•ç”¨äº† '{ref_info['target']}'ï¼Œä½†æ–‡ä»¶ä¸å­˜åœ¨")
            print("   ğŸ’¡ å»ºè®®: è¯·åˆ›å»ºå¯¹åº”çš„ymlæ–‡ä»¶")

        # æ‰“å°æ–‡ä»¶å­˜åœ¨ä½†æœªåŠ è½½çš„å¼•ç”¨
        if invalid_refs_not_loaded:
            print(f"\nâš ï¸  ä»¥ä¸‹ {len(invalid_refs_not_loaded)} ä¸ªreferå¼•ç”¨æŒ‡å‘çš„æ–‡ä»¶å­˜åœ¨ä½†æœªæˆåŠŸåŠ è½½:")
            for ref_info in invalid_refs_not_loaded:
                print(f"   - é—®é¢˜ '{ref_info['source']}' å¼•ç”¨äº† '{ref_info['target']}'")
                print(f"     æ–‡ä»¶: {ref_info['file_path']}")
                print(f"     åŸå› : {ref_info['reason']}")
            print("   ğŸ’¡ å»ºè®®: è¯·æ£€æŸ¥è¿™äº›ymlæ–‡ä»¶çš„æ ¼å¼å’Œå†…å®¹å®Œæ•´æ€§")

        if not invalid_refs_not_exist and not invalid_refs_not_loaded:
            print("\nâœ… æ‰€æœ‰referå¼•ç”¨éƒ½æœ‰æ•ˆ")

        print("="*60 + "\n")
```

**ä¸»è¦åŠŸèƒ½å¢å¼º**ï¼š
1. **é€’å½’è¯»å–å­ç›®å½•**ï¼šä½¿ç”¨ `rglob()` ä»£æ›¿ `glob()`ï¼Œæ”¯æŒä» data ç›®å½•åŠå…¶æ‰€æœ‰å­ç›®å½•åŠ è½½ YAML æ–‡ä»¶
2. **displayå­—æ®µè¿‡æ»¤**ï¼šåªæœ‰ `display=true` çš„é—®é¢˜æ‰ä¼šåœ¨ä¸‹æ‹‰åˆ—è¡¨ä¸­æ˜¾ç¤º
3. **ä¼˜å…ˆçº§æ’åº**ï¼šé—®é¢˜åˆ—è¡¨æŒ‰ä¼˜å…ˆçº§é™åºæ’åˆ—ï¼ˆé«˜ä¼˜å…ˆçº§åœ¨å‰ï¼‰
4. **æ•°æ®è´¨é‡æ£€æŸ¥**ï¼š
   - æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§ï¼ˆstatusã€describeã€priorityã€versionã€displayã€checklistç­‰å­—æ®µï¼‰
   - æ£€æŸ¥æ— æ•ˆçš„referå¼•ç”¨ï¼ˆæ–‡ä»¶ä¸å­˜åœ¨æˆ–æ–‡ä»¶å­˜åœ¨ä½†åŠ è½½å¤±è´¥ï¼‰
   - æ‰“å°è¯¦ç»†çš„æ•°æ®è´¨é‡æŠ¥å‘Š


class TreeBuilder:
    """æ ‘å½¢ç»“æ„æ„å»ºå™¨ - å¤„ç†referå¼•ç”¨å’Œæ ‘å½¢ç»“æ„æ‹¼æ¥"""

    def __init__(self, data_loader: DataLoader):
        self.data_loader = data_loader
        self.built_trees = {}

    def build_complete_tree(self, root_issue_name: str) -> Optional[TreeChecklistItem]:
        """æ„å»ºå®Œæ•´çš„æ ‘å½¢ç»“æ„"""
        if root_issue_name in self.built_trees:
            return self.built_trees[root_issue_name]

        root_issue = self.data_loader.get_issue_by_name(root_issue_name)
        if not root_issue:
            return None

        # æ„å»ºæ ¹èŠ‚ç‚¹
        root_tree = TreeChecklistItem(
            status=root_issue.status,
            describe=root_issue.describe,
            priority=root_issue.priority,
            version=root_issue.version,
            todo="",  # æ ¹é—®é¢˜æ²¡æœ‰todo
            source_file=root_issue.file_name,
            original_path=[root_issue.status],
            is_refer=False
        )

        # é€’å½’æ„å»ºå­æ ‘
        for item in root_issue.checklist:
            child_tree = self._build_child_tree(item, root_issue.file_name, [root_issue.status])
            if child_tree:
                root_tree.children.append(child_tree)

        # ç¼“å­˜æ„å»ºç»“æœ
        self.built_trees[root_issue_name] = root_tree
        return root_tree

    def _build_child_tree(self, item: ChecklistItem, parent_file: str, path: List[str]) -> Optional[TreeChecklistItem]:
        """æ„å»ºå­æ ‘"""
        if hasattr(item, 'refer') and item.refer:
            # å¤„ç†referå¼•ç”¨
            return self._build_refer_tree(item.refer, parent_file, path)
        else:
            # å¤„ç†æ™®é€šé¡¹
            tree_item = TreeChecklistItem(
                status=item.status,
                describe=item.describe,
                priority=item.priority,
                version=item.version,
                todo=item.todo or "",
                source_file=parent_file,
                original_path=path + [item.status],
                is_refer=False
            )

            # é€’å½’å¤„ç†å­é¡¹
            if hasattr(item, 'checklist') and item.checklist:
                for child_item in item.checklist:
                    child_tree = self._build_child_tree(child_item, parent_file, path + [item.status])
                    if child_tree:
                        tree_item.children.append(child_tree)

            return tree_item

    def _build_refer_tree(self, refer_name: str, parent_file: str, path: List[str]) -> Optional[TreeChecklistItem]:
        """æ„å»ºå¼•ç”¨æ ‘"""
        refer_issue = self.data_loader.get_issue_by_name(refer_name)
        if not refer_issue:
            return None

        # åˆ›å»ºå¼•ç”¨èŠ‚ç‚¹
        refer_tree = TreeChecklistItem(
            status=refer_issue.status,
            describe=refer_issue.describe,
            priority=refer_issue.priority,
            version=refer_issue.version,
            todo="",  # å¼•ç”¨çš„é—®é¢˜æœ¬èº«æ²¡æœ‰todo
            source_file=refer_issue.file_name,
            original_path=path + [f"[å¼•ç”¨]{refer_name}"],
            is_refer=True,
            parent_ref=parent_file
        )

        # é€’å½’æ„å»ºå¼•ç”¨é—®é¢˜çš„å­é¡¹
        for item in refer_issue.checklist:
            child_tree = self._build_child_tree(item, refer_issue.file_name, path + [f"[å¼•ç”¨]{refer_name}"])
            if child_tree:
                refer_tree.children.append(child_tree)

        return refer_tree

    def _parse_yml_file(self, file_path: Path) -> Optional[Issue]:
        """è§£æå•ä¸ªymlæ–‡ä»¶"""
        try:
            with open(file_path, 'r', encoding='utf-8') as f:
                data = yaml.safe_load(f)

            if not data or 'status' not in data:
                return None

            checklist_items = []
            for item_data in data.get('checklist', []):
                checklist_item = self._parse_checklist_item(item_data)
                if checklist_item:
                    checklist_items.append(checklist_item)

            return Issue(
                file_name=file_path.stem,
                status=data['status'],
                describe=data.get('describe', ''),
                checklist=checklist_items
            )

        except Exception as e:
            print(f"è§£ææ–‡ä»¶ {file_path} å¤±è´¥: {e}")
            return None

    def _parse_checklist_item(self, item_data: dict) -> Optional[ChecklistItem]:
        """è§£æchecklisté¡¹ç›®"""
        if 'status' not in item_data:
            return None

        # å¤„ç†referç±»å‹
        if 'refer' in item_data:
            return ChecklistItem(
                status=f"å¼•ç”¨: {item_data['refer']}",
                describe=f"å…³è”åˆ°é—®é¢˜: {item_data['refer']}",
                priority=1,
                version="-",
                todo=f"è·³è½¬åˆ°é—®é¢˜: {item_data['refer']}",
                refer=item_data['refer']
            )

        # å¤„ç†æ™®é€šchecklisté¡¹
        checklist_subitems = []
        for subitem_data in item_data.get('checklist', []):
            subitem = self._parse_checklist_item(subitem_data)
            if subitem:
                checklist_subitems.append(subitem)

        return ChecklistItem(
            status=item_data['status'],
            describe=item_data.get('describe', ''),
            priority=item_data.get('priority', 5),
            version=item_data.get('version', '-'),
            todo=item_data.get('todo', ''),
            checklist=checklist_subitems if checklist_subitems else None,
            refer=item_data.get('refer')
        )

    def get_issue_names(self) -> List[str]:
        """è·å–æ‰€æœ‰é—®é¢˜åç§°åˆ—è¡¨"""
        return self.issue_list.copy()
```

### 1.3 æ•°æ®éªŒè¯å™¨

#### 1.3.1 DataValidator ç±»è®¾è®¡
```python
class DataValidator:
    """æ•°æ®éªŒè¯å™¨"""

    @staticmethod
    def validate_issue(issue: Issue) -> List[str]:
        """éªŒè¯Issueæ•°æ®å®Œæ•´æ€§"""
        errors = []

        if not issue.status:
            errors.append("é—®é¢˜ç°è±¡ä¸èƒ½ä¸ºç©º")

        if not issue.checklist:
            errors.append("checklistä¸èƒ½ä¸ºç©º")

        for i, item in enumerate(issue.checklist):
            item_errors = DataValidator.validate_checklist_item(item, f"checklist[{i}]")
            errors.extend(item_errors)

        return errors

    @staticmethod
    def validate_checklist_item(item: ChecklistItem, path: str = "") -> List[str]:
        """éªŒè¯ChecklistItemæ•°æ®å®Œæ•´æ€§"""
        errors = []
        current_path = f"{path}.{item.status}" if path else item.status

        if not hasattr(item, 'status') or not item.status:
            # å¤„ç†çº¯referé¡¹
            if hasattr(item, 'refer') and item.refer:
                return errors  # çº¯referé¡¹æ²¡æœ‰statusæ˜¯æ­£å¸¸çš„
            else:
                errors.append(f"{current_path}: statusä¸èƒ½ä¸ºç©º")

        if hasattr(item, 'priority') and (item.priority < 1 or item.priority > 10):
            errors.append(f"{current_path}: priorityåº”è¯¥åœ¨1-10ä¹‹é—´")

        if hasattr(item, 'checklist') and item.checklist:
            for i, subitem in enumerate(item.checklist):
                subitem_errors = DataValidator.validate_checklist_item(
                    subitem, f"{current_path}.checklist[{i}]"
                )
                errors.extend(subitem_errors)

        return errors
```

## 2. ç³»ç»Ÿæ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„

#### 2.1.1 Webåº”ç”¨æ¶æ„è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Webè¡¨ç¤ºå±‚ (Web Presentation Layer)         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Streamlit      â”‚  â”‚  ä¾§è¾¹æ          â”‚  â”‚  ä¸»å†…å®¹åŒº       â”‚ â”‚
â”‚  â”‚  Webç•Œé¢        â”‚  â”‚  é—®é¢˜é€‰æ‹©       â”‚  â”‚  è¯¦æƒ…é¢æ¿       â”‚ â”‚
â”‚  â”‚  å“åº”å¼è®¾è®¡     â”‚  â”‚  ç»Ÿè®¡ä¿¡æ¯       â”‚  â”‚  æ£€æŸ¥æ¸…å•       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    ä¸šåŠ¡é€»è¾‘å±‚ (Business Layer)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ IssueManager    â”‚  â”‚ ChecklistManagerâ”‚  â”‚ PathNavigator   â”‚ â”‚
â”‚  â”‚ SolutionEngine  â”‚  â”‚ StateManager    â”‚  â”‚  InteractionLogicâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    æ•°æ®è®¿é—®å±‚ (Data Access Layer)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ DataLoader      â”‚  â”‚ DataValidator   â”‚  â”‚  FileWatcher    â”‚ â”‚
â”‚  â”‚ YamlParser      â”‚  â”‚ CacheManager    â”‚  â”‚  ConfigLoader   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.1.2 Streamlit Webæ¶æ„ä¼˜åŠ¿
- **ç®€åŒ–å¼€å‘**: æ— éœ€HTML/CSS/JavaScriptçŸ¥è¯†ï¼Œçº¯Pythonå¼€å‘
- **å®æ—¶é¢„è§ˆ**: ä»£ç ä¿®æ”¹åæµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°
- **å“åº”å¼è®¾è®¡**: è‡ªåŠ¨é€‚é…æ¡Œé¢ã€å¹³æ¿ã€æ‰‹æœºç­‰è®¾å¤‡
- **ä¸°å¯Œç»„ä»¶**: å†…ç½®å›¾è¡¨ã€è¡¨æ ¼ã€ä¾§è¾¹æ ç­‰Webç»„ä»¶
- **çŠ¶æ€ç®¡ç†**: å†…ç½®session_stateç®¡ç†ç”¨æˆ·ä¼šè¯çŠ¶æ€

### 2.2 æ ¸å¿ƒç»„ä»¶è®¾è®¡

#### 2.2.1 Webåº”ç”¨æ§åˆ¶å™¨ (WebController)
```python
import streamlit as st
from typing import Dict, List, Optional

class WebController:
    """Streamlit Webåº”ç”¨æ§åˆ¶å™¨"""

    def __init__(self):
        self.data_loader = DataLoader()
        self.app_state = AppState()
        self.tree_builder = TreeBuilder(self.data_loader)
        self.app_state.tree_builder = self.tree_builder

    def initialize_session_state(self):
        """åˆå§‹åŒ–Streamlitä¼šè¯çŠ¶æ€"""
        if 'current_issue' not in st.session_state:
            st.session_state.current_issue = None
        if 'navigation_path' not in st.session_state:
            st.session_state.navigation_path = []
        if 'excluded_items' not in st.session_state:
            st.session_state.excluded_items = []
        if 'solution_text' not in st.session_state:
            st.session_state.solution_text = None

    def render_sidebar(self) -> Optional[str]:
        """æ¸²æŸ“ä¾§è¾¹æ å¹¶è¿”å›é€‰æ‹©çš„é—®é¢˜"""
        with st.sidebar:
            st.title("ğŸ”§ è¿ç»´æ’æŸ¥åŠ©æ‰‹")

            # é—®é¢˜é€‰æ‹©
            issue_names = list(self.data_loader.load_all_issues().keys())
            if issue_names:
                selected_issue = st.selectbox(
                    "ğŸ“‹ é€‰æ‹©é—®é¢˜ç°è±¡",
                    options=issue_names,
                    key="issue_selector"
                )

                if st.button("ğŸ”„ é‡ç½®", key="reset_button"):
                    self._reset_session_state()
                    st.rerun()

                return selected_issue
            return None

    def handle_issue_selection(self, issue_name: str):
        """å¤„ç†é—®é¢˜é€‰æ‹©"""
        if issue_name != st.session_state.get('current_issue'):
            issue = self.data_loader.get_issue_by_name(issue_name)
            if issue:
                self.app_state.set_current_issue(issue)
                self.app_state.build_current_tree()
                st.session_state.current_issue = issue_name
                st.session_state.navigation_path = [issue_name]
                st.session_state.excluded_items = []
                st.session_state.solution_text = None

    def _reset_session_state(self):
        """é‡ç½®ä¼šè¯çŠ¶æ€"""
        for key in st.session_state.keys():
            del st.session_state[key]
        self.initialize_session_state()
```

#### 2.2.2 é—®é¢˜ç®¡ç†å™¨ (IssueManager)
```python
class IssueManager:
    """é—®é¢˜ç®¡ç†å™¨"""

    def __init__(self, data_loader: DataLoader):
        self.data_loader = data_loader

    def get_issue_by_name(self, name: str) -> Optional[Issue]:
        """æ ¹æ®åç§°è·å–é—®é¢˜"""
        return self.data_loader.issues.get(name)

    def search_issues(self, keyword: str) -> List[Issue]:
        """æœç´¢é—®é¢˜"""
        keyword = keyword.lower()
        results = []

        for issue in self.data_loader.issues.values():
            if (keyword in issue.status.lower() or
                keyword in issue.describe.lower()):
                results.append(issue)

        return results

    def get_all_issue_names(self) -> List[str]:
        """è·å–æ‰€æœ‰é—®é¢˜åç§°"""
        return self.data_loader.get_issue_names()
```

#### 2.2.3 æ ‘å½¢Checklistç®¡ç†å™¨ (TreeChecklistManager)
```python
class TreeChecklistManager:
    """æ ‘å½¢Checklistç®¡ç†å™¨"""

    def __init__(self, app_state: AppState):
        self.app_state = app_state

    def get_current_checklist(self) -> List[TreeChecklistItem]:
        """è·å–å½“å‰å±‚çº§çš„checklist"""
        return self.app_state.get_current_checklist_items()

    def exclude_checklist_item(self, item: TreeChecklistItem):
        """æ’é™¤checklisté¡¹"""
        item_path = " â†’ ".join(item.original_path)
        if item_path not in self.app_state.excluded_items:
            self.app_state.excluded_items.append(item_path)

    def confirm_checklist_item(self, item: TreeChecklistItem) -> Optional[str]:
        """ç¡®è®¤checklisté¡¹ï¼Œè¿”å›è§£å†³æ–¹æ¡ˆ"""
        if item.children:
            # æœ‰å­é¡¹ï¼Œè·³è½¬åˆ°å­å±‚çº§
            self.app_state.current_checklist = item
            self.app_state.navigation_path = item.original_path.copy()
            return None
        else:
            # å¶å­èŠ‚ç‚¹ï¼Œè¿”å›è§£å†³æ–¹æ¡ˆ
            return item.todo

    def navigate_to_parent(self) -> bool:
        """å¯¼èˆªåˆ°çˆ¶çº§"""
        if len(self.app_state.navigation_path) <= 1:
            return False

        # ç§»é™¤å½“å‰èŠ‚ç‚¹
        self.app_state.navigation_path.pop()

        # æŸ¥æ‰¾çˆ¶èŠ‚ç‚¹
        parent_path = self.app_state.navigation_path.copy()
        parent_item = self._find_item_by_path(self.app_state.current_tree, parent_path)

        if parent_item:
            self.app_state.current_checklist = parent_item
            return True

        return False

    def _find_item_by_path(self, tree: TreeChecklistItem, path: List[str]) -> Optional[TreeChecklistItem]:
        """æ ¹æ®è·¯å¾„æŸ¥æ‰¾æ ‘èŠ‚ç‚¹"""
        current = tree

        for path_part in path[1:]:  # è·³è¿‡æ ¹èŠ‚ç‚¹
            found = False
            for child in current.children:
                if child.status == path_part or f"[å¼•ç”¨]{child.status}" == path_part:
                    current = child
                    found = True
                    break

            if not found:
                return None

        return current
```

### 2.3 å¯¼èˆªç³»ç»Ÿè®¾è®¡

#### 2.3.1 è·¯å¾„å¯¼èˆªå™¨ (PathNavigator)
```python
class PathNavigator:
    """è·¯å¾„å¯¼èˆªå™¨"""

    def __init__(self, app_state: AppState):
        self.app_state = app_state

    def navigate_to_level(self, level: int) -> bool:
        """å¯¼èˆªåˆ°æŒ‡å®šå±‚çº§"""
        if level < 0 or level >= len(self.app_state.navigation_path):
            return False

        # æˆªæ–­è·¯å¾„åˆ°æŒ‡å®šå±‚çº§
        self.app_state.navigation_path = self.app_state.navigation_path[:level]

        # é‡ç½®å½“å‰checkliståˆ°å¯¹åº”å±‚çº§
        if level == 0:
            self.app_state.current_checklist = None
        else:
            # æ ¹æ®è·¯å¾„æ‰¾åˆ°å¯¹åº”çš„checklisté¡¹
            target_item = self._find_checklist_by_path(self.app_state.navigation_path)
            self.app_state.current_checklist = target_item

        return True

    def _find_checklist_by_path(self, path: List[str]) -> Optional[ChecklistItem]:
        """æ ¹æ®è·¯å¾„æŸ¥æ‰¾checklisté¡¹"""
        if not path or not self.app_state.current_issue:
            return None

        current_checklist = self.app_state.current_issue.checklist

        for path_item in path[1:]:  # è·³è¿‡ç¬¬ä¸€ä¸ªï¼Œé‚£æ˜¯é—®é¢˜åç§°
            for item in current_checklist:
                if item.status == path_item:
                    if item.checklist:
                        current_checklist = item.checklist
                        break
            else:
                return None

        # æ‰¾åˆ°ç›®æ ‡é¡¹
        for item in current_checklist:
            if item.status == path[-1]:
                return item

        return None

    def get_current_path(self) -> List[str]:
        """è·å–å½“å‰å¯¼èˆªè·¯å¾„"""
        if not self.app_state.current_issue:
            return []

        path = [self.app_state.current_issue.status]
        path.extend(self.app_state.navigation_path[1:])  # è·³è¿‡é‡å¤çš„é—®é¢˜åç§°
        return path
```

## 3. ç³»ç»Ÿæ¶æ„è®¾è®¡

### 3.1 ä¸‰æ å¸ƒå±€æ¶æ„

#### 3.1.1 æ•´ä½“æ¶æ„è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Webè¡¨ç¤ºå±‚ (Web Presentation Layer)         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   å·¦ä¾§å¯¼èˆªé¢æ¿   â”‚  â”‚    ä¸­é—´è¯¦æƒ…é¢æ¿   â”‚  â”‚    å³ä¾§æ“ä½œé¢æ¿   â”‚ â”‚
â”‚  â”‚                â”‚  â”‚                â”‚  â”‚                â”‚ â”‚
â”‚  â”‚ â€¢ é—®é¢˜é€‰æ‹©     â”‚  â”‚ â€¢ å½“å‰æ£€æŸ¥é¡¹    â”‚  â”‚ â€¢ Checkliståˆ—è¡¨  â”‚ â”‚
â”‚  â”‚ â€¢ å¯¼èˆªè·¯å¾„     â”‚  â”‚ â€¢ è¯¦ç»†ä¿¡æ¯      â”‚  â”‚ â€¢ è§£å†³æ–¹æ¡ˆ      â”‚ â”‚
â”‚  â”‚ â€¢ è¿”å›ä¸Šçº§     â”‚  â”‚ â€¢ ä¼˜å…ˆçº§/ç‰ˆæœ¬  â”‚  â”‚ â€¢ åŠ¨æ€åˆ‡æ¢      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    ä¸šåŠ¡é€»è¾‘å±‚ (Business Layer)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ StateManager    â”‚  â”‚ TreeBuilder     â”‚  â”‚ WebController   â”‚ â”‚
â”‚  â”‚ çŠ¶æ€ç®¡ç†        â”‚  â”‚ æ ‘å½¢æ„å»º        â”‚  â”‚ ç•Œé¢æ§åˆ¶        â”‚ â”‚
â”‚  â”‚ â€¢ æ™ºèƒ½åˆ‡æ¢     â”‚  â”‚ â€¢ å¼•ç”¨å¤„ç†      â”‚  â”‚ â€¢ äº¤äº’é€»è¾‘      â”‚ â”‚
â”‚  â”‚ â€¢ è·¯å¾„å¯¼èˆª     â”‚  â”‚ â€¢ ç¼“å­˜ç®¡ç†      â”‚  â”‚ â€¢ ç”¨æˆ·å“åº”      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    æ•°æ®è®¿é—®å±‚ (Data Access Layer)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ DataLoader      â”‚  â”‚ DataValidator   â”‚  â”‚  FileWatcher    â”‚ â”‚
â”‚  â”‚ YAMLè§£æ        â”‚  â”‚ æ•°æ®éªŒè¯        â”‚  â”‚  æ–‡ä»¶ç›‘æ§      â”‚ â”‚
â”‚  â”‚ åŠ¨æ€åŠ è½½        â”‚  â”‚ ç±»å‹æ£€æŸ¥        â”‚  â”‚  çƒ­æ›´æ–°        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.1.2 æ™ºèƒ½çŠ¶æ€ç®¡ç†æ¶æ„
```
ç”¨æˆ·æ“ä½œ â†’ çŠ¶æ€æ›´æ–° â†’ ç•Œé¢åˆ‡æ¢ â†’ ç”¨æˆ·åé¦ˆ
    â†“         â†“         â†“         â†“
  ç‚¹å‡»ç¡®è®¤   æ›´æ–°confirmed_item  åˆ¤æ–­is_refer  æ˜¾ç¤ºå†…å®¹
  é€‰æ‹©é—®é¢˜   æ›´æ–°navigation_path  è·å–current_node  æ˜¾ç¤ºè¯¦æƒ…
  æ’é™¤é¡¹ç›®   æ›´æ–°excluded_items   è®¾ç½®excluded   è§†è§‰åé¦ˆ
```

### 3.2 æ ¸å¿ƒäº¤äº’æµç¨‹è®¾è®¡

#### 3.2.1 æ™ºèƒ½çŠ¶æ€åˆ‡æ¢æµç¨‹
```mermaid
graph TD
    A[ç”¨æˆ·é€‰æ‹©é—®é¢˜] --> B{å³ä¾§é¢æ¿çŠ¶æ€åˆ¤æ–­}
    B --> |æ— å·²ç¡®è®¤é¡¹ç›®| C[æ˜¾ç¤ºCheckliståˆ—è¡¨]
    B --> |æœ‰å·²ç¡®è®¤é¡¹ç›®| D{åˆ¤æ–­é¡¹ç›®ç±»å‹}

    D --> |æ™®é€šé¡¹ç›®| E[æ˜¾ç¤ºè§£å†³æ–¹æ¡ˆè¯¦æƒ…]
    D --> |å¼•ç”¨é¡¹ç›®| F[æ˜¾ç¤ºè¢«å¼•ç”¨é¡¹ç›®çš„å­é¡¹]

    E --> G[ç”¨æˆ·ç‚¹å‡»è¿”å›] --> H[é‡ç½®confirmed_item]
    F --> G

    H --> C

    style A fill:#e1f5fe
    style C fill:#f3e5f5
    style E fill:#e8f5e8
    style F fill:#fff3e0
    style G fill:#fce4ec
    style H fill:#f3e5f5
```

#### 3.2.2 å¯¼èˆªè·¯å¾„ç®¡ç†
```python
# å¯¼èˆªè·¯å¾„ç¤ºä¾‹
navigation_path = ["æ—¥å¿—å¼•æ“å¯åŠ¨å¼‚å¸¸", "yarnèŠ‚ç‚¹å¼‚å¸¸", "yarnèŠ‚ç‚¹ç›¸å…³æœºå™¨æ—¶é—´ä¸ä¸€è‡´"]

# ç•Œé¢å±•ç¤ºé€»è¾‘
if len(navigation_path) <= 1:
    # æ˜¾ç¤ºé—®é¢˜è¯¦æƒ…
    display_node = current_tree
else:
    # æ˜¾ç¤ºå½“å‰æ’æŸ¥è¿›å±•
    display_node = get_current_checklist_item()

# æ”¯æŒå¿«é€Ÿè·³è½¬
for i, path_item in enumerate(navigation_path):
    if st.button(f"è·³è½¬åˆ°: {path_item}"):
        target_path = navigation_path[:i+1]
        navigate_to_path(target_path)
```

## 4. åŠŸèƒ½æ¨¡å—è¯¦ç»†è®¾è®¡

### 4.1 Webç•Œé¢æ¨¡å— (WebInterface)

#### 3.1.1 Streamlitä¸»åº”ç”¨ç±» (MainApp)
```python
import streamlit as st
from typing import Dict, List, Optional

class MainApp:
    """Streamlitä¸»åº”ç”¨ç±»"""

    def __init__(self):
        self.controller = WebController()
        self.setup_page_config()

    def setup_page_config(self):
        """è®¾ç½®é¡µé¢é…ç½®"""
        st.set_page_config(
            page_title="è¿ç»´çŸ¥è¯†åº“æ™ºèƒ½æ’æŸ¥åŠ©æ‰‹",
            page_icon="ğŸ”§",
            layout="wide",
            initial_sidebar_state="expanded"
        )

    def run(self):
        """è¿è¡Œä¸»åº”ç”¨"""
        # åˆå§‹åŒ–ä¼šè¯çŠ¶æ€
        self.controller.initialize_session_state()

        # æ¸²æŸ“ä¾§è¾¹æ 
        selected_issue = self.controller.render_sidebar()

        # å¤„ç†é—®é¢˜é€‰æ‹©
        if selected_issue:
            self.controller.handle_issue_selection(selected_issue)

        # æ¸²æŸ“ä¸»å†…å®¹åŒº
        self._render_main_content()

    def _render_main_content(self):
        """æ¸²æŸ“ä¸»å†…å®¹åŒº"""
        if not st.session_state.get('current_issue'):
            self._show_welcome_screen()
            return

        # æ˜¾ç¤ºæ ‡é¢˜
        st.title(f"ğŸ” {st.session_state.current_issue}")

        # åˆ›å»ºä¸¤åˆ—å¸ƒå±€
        col1, col2 = st.columns([1, 3])

        with col1:
            self._render_navigation_panel()

        with col2:
            self._render_detail_panel()
            self._render_checklist_panel()
            self._render_solution_panel()

    def _show_welcome_screen(self):
        """æ˜¾ç¤ºæ¬¢è¿ç•Œé¢"""
        st.markdown("""
        # ğŸ”§ è¿ç»´çŸ¥è¯†åº“æ™ºèƒ½æ’æŸ¥åŠ©æ‰‹

        è¯·ä»å·¦ä¾§é€‰æ‹©è¦æ’æŸ¥çš„é—®é¢˜ç°è±¡ï¼Œå¼€å§‹æ™ºèƒ½æ’æŸ¥æµç¨‹ã€‚

        ## ä½¿ç”¨è¯´æ˜
        1. ä»å·¦ä¾§é€‰æ‹©é—®é¢˜ç°è±¡
        2. æŸ¥çœ‹é—®é¢˜è¯¦æƒ…
        3. é€é¡¹ç¡®è®¤checklist
        4. è·å–è§£å†³æ–¹æ¡ˆ

        é€‰æ‹©é—®é¢˜åï¼Œç³»ç»Ÿå°†å¼•å¯¼æ‚¨å®Œæˆæ’æŸ¥æµç¨‹ã€‚
        """)

    def _render_navigation_panel(self):
        """æ¸²æŸ“å¯¼èˆªé¢æ¿"""
        st.subheader("ğŸ“ å½“å‰æ’æŸ¥è·¯å¾„")

        navigation_path = st.session_state.get('navigation_path', [])
        if navigation_path:
            for i, path_item in enumerate(navigation_path):
                if i == 0:
                    st.markdown(f"ğŸ“ **{path_item}**")
                else:
                    indent = "ã€€ã€€" * i
                    if i == len(navigation_path) - 1:
                        st.markdown(f"{indent}â—‰ **{path_item}**")
                    else:
                        st.markdown(f"{indent}â””â”€ {path_item}")
        else:
            st.info("æœªå¼€å§‹æ’æŸ¥")

    def _render_detail_panel(self):
        """æ¸²æŸ“è¯¦æƒ…é¢æ¿"""
        st.subheader("ğŸ“‹ å½“å‰é—®é¢˜è¯¦æƒ…")

        # è·å–å½“å‰é—®é¢˜ä¿¡æ¯
        issue_name = st.session_state.get('current_issue')
        if issue_name:
            issue = self.controller.data_loader.get_issue_by_name(issue_name)
            if issue:
                col1, col2 = st.columns(2)
                with col1:
                    st.metric("ä¼˜å…ˆçº§", issue.priority)
                with col2:
                    st.metric("ç‰ˆæœ¬", issue.version if issue.version else "-")

                st.markdown(f"**é—®é¢˜æè¿°**: {issue.describe}")

    def _render_checklist_panel(self):
        """æ¸²æŸ“æ£€æŸ¥æ¸…å•é¢æ¿"""
        st.subheader("âœ… Checklistç¡®è®¤å•")

        # è·å–å½“å‰æ£€æŸ¥æ¸…å•
        checklist_items = self.controller.app_state.get_current_checklist_items()

        if not checklist_items:
            st.info("æ²¡æœ‰æ£€æŸ¥é¡¹")
            return

        for i, item in enumerate(checklist_items):
            with st.expander(f"{item.status} (ä¼˜å…ˆçº§: {item.priority})"):
                st.write(item.describe)

                col1, col2 = st.columns([1, 1])

                with col1:
                    excluded_key = f"exclude_{i}"
                    if st.checkbox(f"æ’é™¤ {item.status}", key=excluded_key):
                        self._handle_exclude_item(item)

                with col2:
                    confirm_key = f"confirm_{i}"
                    if st.button(f"ç¡®è®¤ {item.status}", key=confirm_key):
                        self._handle_confirm_item(item)

    def _render_solution_panel(self):
        """æ¸²æŸ“è§£å†³æ–¹æ¡ˆé¢æ¿"""
        solution_text = st.session_state.get('solution_text')
        if solution_text:
            st.subheader("ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ")
            st.success(solution_text)

    def _handle_exclude_item(self, item):
        """å¤„ç†æ’é™¤é¡¹ç›®"""
        if item.status not in st.session_state.get('excluded_items', []):
            st.session_state.excluded_items.append(item.status)
            st.success(f"å·²æ’é™¤: {item.status}")
            st.rerun()

    def _handle_confirm_item(self, item):
        """å¤„ç†ç¡®è®¤é¡¹ç›®"""
        if item.todo:
            # æ˜¾ç¤ºè§£å†³æ–¹æ¡ˆ
            st.session_state.solution_text = item.todo
            st.success(f"ç¡®è®¤åŸå› : {item.status}")
            st.rerun()
        elif hasattr(item, 'children') and item.children:
            # è¿›å…¥ä¸‹ä¸€å±‚çº§
            self.controller.app_state.current_checklist = item
            new_path = st.session_state.navigation_path.copy()
            new_path.append(item.status)
            st.session_state.navigation_path = new_path
            st.session_state.solution_text = None
            st.rerun()
        else:
            st.info("éœ€è¦è¿›ä¸€æ­¥æ’æŸ¥å­é¡¹")
  #### 3.1.2 Webç•Œé¢æ¸²æŸ“å™¨ (WebRenderer)
```python
import streamlit as st
from typing import Dict, List, Optional

class WebRenderer:
    """Webç•Œé¢æ¸²æŸ“å™¨"""

    @staticmethod
    def render_checklist_item(item, index: int):
        """æ¸²æŸ“å•ä¸ªæ£€æŸ¥é¡¹"""
        with st.expander(f"{item.status} (ä¼˜å…ˆçº§: {item.priority})"):
            st.write(item.describe)

            col1, col2 = st.columns([1, 1])

            with col1:
                excluded = st.checkbox(f"æ’é™¤ {item.status}", key=f"exclude_{index}")
                if excluded:
                    return 'exclude'

            with col2:
                if st.button(f"ç¡®è®¤ {item.status}", key=f"confirm_{index}"):
                    return 'confirm'

        return None

    @staticmethod
    def render_solution_steps(todo_text: str, wiki_links=None, gif_links=None, script_links=None):
        """æ¸²æŸ“è§£å†³æ–¹æ¡ˆæ­¥éª¤"""
        st.subheader("ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ")

        with st.success("è§£å†³æ–¹æ¡ˆå·²æ‰¾åˆ°"):
            st.markdown("**æ“ä½œæ­¥éª¤:**")

            # ç®€å•çš„æ­¥éª¤è§£æï¼ˆå‡è®¾todoä¸­åŒ…å«ç¼–å·æ­¥éª¤ï¼‰
            lines = todo_text.split('\n')
            for line in lines:
                line = line.strip()
                if line and (line[0].isdigit() or line.startswith('-')):
                    st.markdown(f"- {line}")
                elif line:
                    st.markdown(line)

        st.markdown("---")

        # ğŸ“š Wikiæ–‡æ¡£é“¾æ¥
        if wiki_links:
            st.markdown("### ğŸ“š ç›¸å…³æ–‡æ¡£")
            from urllib.parse import unquote
            for wiki_url in wiki_links:
                decoded_url = unquote(wiki_url)
                st.markdown(f'- [{decoded_url}]({wiki_url})', unsafe_allow_html=True)

        # ğŸ¬ GIFæ¼”ç¤ºé“¾æ¥
        if gif_links:
            st.markdown("### ğŸ¬ æ¼”ç¤ºè§†é¢‘")
            from urllib.parse import unquote
            for gif_url in gif_links:
                decoded_url = unquote(gif_url)
                st.markdown(f'- [{decoded_url}]({gif_url})', unsafe_allow_html=True)

        # ğŸ“œ è„šæœ¬æ–‡ä»¶é“¾æ¥
        if script_links:
            st.markdown("### ğŸ“œ ç›¸å…³è„šæœ¬")
            from urllib.parse import unquote
            for script_url in script_links:
                # æå–æ–‡ä»¶åå¹¶è§£ç 
                script_name = script_url.split("/")[-1] if "/" in script_url else script_url
                decoded_name = unquote(script_name)
                st.markdown(f'- [{decoded_name}]({script_url})', unsafe_allow_html=True)

    @staticmethod
    def render_progress_stats(current_issue: str, excluded_items: List[str]):
        """æ¸²æŸ“è¿›åº¦ç»Ÿè®¡"""
        col1, col2, col3 = st.columns(3)

        with col1:
            st.metric("å½“å‰é—®é¢˜", current_issue)

        with col2:
            st.metric("å·²æ’é™¤", len(excluded_items))

        with col3:
            # è¿™é‡Œå¯ä»¥è®¡ç®—å‰©ä½™é¡¹ç›®æ•°
            st.metric("æ’æŸ¥çŠ¶æ€", "è¿›è¡Œä¸­" if excluded_items else "å¾…å¼€å§‹")
```
  ### 3.2 Webéƒ¨ç½²å’Œé…ç½®

#### 3.2.1 åº”ç”¨å…¥å£æ–‡ä»¶ (main.py)
```python
#!/usr/bin/env python3
"""
è¿ç»´çŸ¥è¯†åº“æ™ºèƒ½æ’æŸ¥åŠ©æ‰‹ - Streamlit Webç‰ˆæœ¬
"""

import sys
from pathlib import Path

# æ·»åŠ é¡¹ç›®è·¯å¾„
project_root = Path(__file__).parent
sys.path.insert(0, str(project_root))

import streamlit as st
from src.web_app import MainApp

def main():
    """ä¸»å‡½æ•°"""
    app = MainApp()
    app.run()

if __name__ == "__main__":
    main()
```

#### 3.2.2 Streamlité…ç½®æ–‡ä»¶ (.streamlit/config.toml)
```toml
[theme]
primaryColor = "#FF6B6B"
backgroundColor = "#FFFFFF"
secondaryBackgroundColor = "#F0F2F6"
textColor = "#262730"
font = "sans serif"

[server]
headless = true
port = 8501
address = "localhost"

[browser]
gatherUsageStats = false
```

#### 3.2.3 ä¾èµ–ç®¡ç† (requirements.txt)
```txt
# æ ¸å¿ƒä¾èµ–
streamlit>=1.28.0
PyYAML>=6.0

# æ•°æ®å¤„ç†
pandas>=1.5.0  # å¯é€‰ï¼Œç”¨äºæ•°æ®åˆ†æåŠŸèƒ½

# éƒ¨ç½²ç›¸å…³
gunicorn>=21.2.0  # ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
```

#### 3.2.4 å¯åŠ¨è„šæœ¬
**Windowså¯åŠ¨è„šæœ¬** (scripts/start_web.bat):
```batch
@echo off
echo å¯åŠ¨è¿ç»´æ’æŸ¥åŠ©æ‰‹Webç‰ˆæœ¬...
cd /d "%~dp0.."

# æ£€æŸ¥Pythonç¯å¢ƒ
python --version >nul 2>&1
if errorlevel 1 (
    echo é”™è¯¯: æœªæ‰¾åˆ°Pythonç¯å¢ƒ
    pause
    exit /b 1
)

# æ£€æŸ¥ä¾èµ–
echo æ£€æŸ¥ä¾èµ–...
pip install -r requirements.txt

# å¯åŠ¨Streamlitåº”ç”¨
echo å¯åŠ¨Webåº”ç”¨...
streamlit run src/web_app.py --server.headless false --server.port 8501

pause
```

**Linux/Macå¯åŠ¨è„šæœ¬** (scripts/start_web.sh):
```bash
#!/bin/bash
echo "å¯åŠ¨è¿ç»´æ’æŸ¥åŠ©æ‰‹Webç‰ˆæœ¬..."

# åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•
cd "$(dirname "$0")/.."

# æ£€æŸ¥Pythonç¯å¢ƒ
if ! command -v python3 &> /dev/null; then
    echo "é”™è¯¯: æœªæ‰¾åˆ°Python3ç¯å¢ƒ"
    exit 1
fi

# æ£€æŸ¥ä¾èµ–
echo "æ£€æŸ¥ä¾èµ–..."
pip3 install -r requirements.txt

# å¯åŠ¨Streamlitåº”ç”¨
echo "å¯åŠ¨Webåº”ç”¨..."
streamlit run src/web_app.py --server.headless false --server.port 8501
```

  ## 5. äº¤äº’é€»è¾‘ä¼˜åŠ¿æ€»ç»“

### 5.1 æ™ºèƒ½åŒ–ç”¨æˆ·ä½“éªŒ

#### ğŸ”„ æ— ç¼çŠ¶æ€åˆ‡æ¢
- **è‡ªåŠ¨åˆ¤æ–­å†…å®¹ç±»å‹**: ç³»ç»Ÿæ™ºèƒ½è¯†åˆ«æ˜¯æ˜¾ç¤ºCheckliståˆ—è¡¨è¿˜æ˜¯è§£å†³æ–¹æ¡ˆ
- **å¼•ç”¨é¡¹ç›®å¤„ç†**: è‡ªåŠ¨è¯†åˆ«referç±»å‹ï¼Œæ˜¾ç¤ºè¢«å¼•ç”¨é¡¹ç›®çš„å­æ£€æŸ¥é¡¹
- **æŒç»­æ’æŸ¥æ”¯æŒ**: ç”¨æˆ·å¯ä»¥éšæ—¶è¿”å›ç»§ç»­æ’æŸ¥ï¼Œä¸ä¼šä¸­æ–­æµç¨‹

#### ğŸ“ ç²¾å‡†ä¿¡æ¯ç®¡ç†
- **ç»Ÿä¸€å±•ç¤ºæ ‡å‡†**: é—®é¢˜ç°è±¡å’Œæ£€æŸ¥é¡¹ä½¿ç”¨ç›¸åŒçš„å±•ç¤ºæ ¼å¼
- **å®æ—¶çŠ¶æ€æ›´æ–°**: æ‰€æœ‰æ“ä½œç«‹å³åæ˜ åœ¨ç•Œé¢ä¸Š
- **è§†è§‰å±‚æ¬¡æ¸…æ™°**: æ’é™¤é¡¹ç›®åˆ é™¤çº¿ã€ç¡®è®¤é¡¹ç›®é«˜äº®æ˜¾ç¤º

#### âš¡ é«˜æ•ˆæ“ä½œæµç¨‹
- **ä¸€æ¬¡æ€§å±•ç¤º**: æ‰€æœ‰æ£€æŸ¥é¡¹ç›´æ¥æ˜¾ç¤ºï¼Œæ— éœ€é€çº§å±•å¼€
- **æ™ºèƒ½æ’åº**: æŒ‰ä¼˜å…ˆçº§è‡ªåŠ¨æ’åºï¼Œä¼˜å…ˆå¤„ç†å…³é”®é—®é¢˜
- **å¿«é€Ÿå¯¼èˆª**: ç‚¹å‡»è·¯å¾„ä»»æ„èŠ‚ç‚¹å¿«é€Ÿè·³è½¬

### 5.2 æŠ€æœ¯æ¶æ„ä¼˜åŠ¿

#### ğŸ—ï¸ æ¨¡å—åŒ–è®¾è®¡
- **åˆ†å±‚æ¶æ„**: è¡¨ç¤ºå±‚ã€ä¸šåŠ¡å±‚ã€æ•°æ®å±‚èŒè´£æ¸…æ™°
- **å¼ºç±»å‹å®‰å…¨**: ä½¿ç”¨dataclassç¡®ä¿ä»£ç è´¨é‡å’Œç±»å‹å®‰å…¨
- **å¯æ‰©å±•æ€§**: æ–°å¢é—®é¢˜æˆ–åŠŸèƒ½æ¨¡å—åŒ–æ‰©å±•

#### ğŸ’¾ æ•°æ®ç®¡ç†ä¼˜åŒ–
- **YAMLé©±åŠ¨**: ç»“æ„åŒ–é…ç½®ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
- **çŸ¥è¯†å¤ç”¨**: é€šè¿‡referå¼•ç”¨é¿å…é‡å¤ç»´æŠ¤
- **åŠ¨æ€åŠ è½½**: æ”¯æŒçƒ­æ›´æ–°ï¼Œæ— éœ€é‡å¯åº”ç”¨

#### ğŸ¨ äº¤äº’è®¾è®¡åˆ›æ–°
- **ä¸‰æ å¸ƒå±€**: å·¦ä¾§å¯¼èˆª + ä¸­é—´è¯¦æƒ… + å³ä¾§æ“ä½œï¼Œä¿¡æ¯å±‚æ¬¡æ¸…æ™°
- **æ™ºèƒ½åˆ‡æ¢**: æ ¹æ®ç”¨æˆ·æ“ä½œè‡ªåŠ¨è°ƒæ•´ç•Œé¢å†…å®¹
- **ç›´è§‚æ“ä½œ**: emojiå›¾æ ‡æŒ‰é’®é…åˆæ‚¬æµ®æç¤º

### 5.3 å®é™…åº”ç”¨ä»·å€¼

#### ğŸš€ æå‡æ’æŸ¥æ•ˆç‡
- **å¿«é€Ÿå®šä½**: é€šè¿‡ä¼˜å…ˆçº§æ’åºå’Œæ™ºèƒ½å¯¼èˆªå¿«é€Ÿæ‰¾åˆ°é—®é¢˜
- **çŸ¥è¯†å¤ç”¨**: é€šè¿‡å¼•ç”¨é¿å…é‡å¤ç»´æŠ¤ç›¸åŒæ’æŸ¥æµç¨‹
- **ç»éªŒç§¯ç´¯**: ç»“æ„åŒ–ä¿å­˜è¿ç»´ç»éªŒå’Œè§£å†³æ–¹æ¡ˆ

#### ğŸ“ˆ é™ä½ç»´æŠ¤æˆæœ¬
- **é…ç½®é©±åŠ¨**: éæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½ç»´æŠ¤æ’æŸ¥çŸ¥è¯†åº“
- **ç»Ÿä¸€æ ‡å‡†**: æ ‡å‡†åŒ–çš„æ ¼å¼å’Œå±•ç¤ºæ–¹å¼
- **ç‰ˆæœ¬ç®¡ç†**: æ”¯æŒYAMLæ–‡ä»¶çš„ç‰ˆæœ¬æ§åˆ¶å’Œå›¢é˜Ÿåä½œ

### 5.4 æ‰©å±•æ€§å’Œçµæ´»æ€§

#### ğŸ”§ æŠ€æœ¯æ‰©å±•
- **å¤šå¼•æ“æ”¯æŒ**: å¯æ‰©å±•æ”¯æŒå…¶ä»–æ’æŸ¥å¼•æ“ï¼ˆå¦‚ElasticSearchã€Prometheusç­‰ï¼‰
- **APIé›†æˆ**: å¯é›†æˆå¤–éƒ¨APIè·å–å®æ—¶ç›‘æ§æ•°æ®
- **AIå¢å¼º**: å¯é›†æˆå¤§æ¨¡å‹æä¾›æ™ºèƒ½å»ºè®®

#### ğŸ“± éƒ¨ç½²çµæ´»
- **æœ¬åœ°éƒ¨ç½²**: æ”¯æŒå†…ç½‘ç‹¬ç«‹éƒ¨ç½²
- **äº‘ç«¯éƒ¨ç½²**: æ”¯æŒDockerå®¹å™¨åŒ–éƒ¨ç½²
- **å¤šç¯å¢ƒ**: å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒé…ç½®çµæ´»

è¿™ä¸ªåˆ›æ–°çš„äº¤äº’è®¾è®¡æ–¹æ¡ˆï¼Œé€šè¿‡æ™ºèƒ½çŠ¶æ€ç®¡ç†å’Œç²¾å‡†ä¿¡æ¯å±•ç¤ºï¼Œä¸ºè¿ç»´äººå‘˜æä¾›äº†å‰æ‰€æœªæœ‰çš„æ’æŸ¥ä½“éªŒï¼Œæ˜¾è‘—æå‡äº†è¿ç»´æ•ˆç‡å’Œé—®é¢˜è§£å†³èƒ½åŠ›ã€‚
